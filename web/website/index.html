<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <title>퍼펫트 - 반려동물 관리</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="styles.css" />
    <link rel="stylesheet" href="../common/tabbar.css" />
  </head>
  <body>
    <!-- Header -->
    <header class="header">
      <div class="header-left">
        <img src="../svg/Union.svg" alt="logo" class="logo-image" />
        <h1 class="logo-text">퍼펫트</h1>
      </div>
      <div class="header-right">
        <svg
          class="bell-icon"
          width="18"
          height="18"
          viewBox="0 0 18 18"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M9 1.8C6.3 1.8 4.5 3.6 4.5 6.3V8.1C4.5 9 3.6 9.9 2.7 10.8V12.6H15.3V10.8C14.4 9.9 13.5 9 13.5 8.1V6.3C13.5 3.6 11.7 1.8 9 1.8Z"
            stroke="#202027"
            stroke-width="1.5"
            fill="none"
            stroke-linecap="round"
            stroke-linejoin="round"
          />
          <path
            d="M6.3 12.6V13.5C6.3 14.4 7.2 15.3 9 15.3C10.8 15.3 11.7 14.4 11.7 13.5V12.6"
            stroke="#202027"
            stroke-width="1.5"
            fill="none"
            stroke-linecap="round"
          />
          <circle cx="9" cy="14.4" r="0.9" fill="#202027" />
        </svg>
      </div>
    </header>

    <!-- 반려동물 정보 섹션 -->
    <div class="pet-info-section">
      <div class="pet-profile-image"></div>
      <div class="pet-info-text">
        <div class="pet-name-wrapper">
          <div class="pet-name"></div>
          <span class="pet-gender"></span>
          <div class="pet-details"></div>
        </div>
        <div class="pet-action-buttons">
          <button class="mypage-btn">마이페이지</button>
          <button class="add-pet-btn">
            <div class="add-pet-icon">+</div>
            <span>내새꾸 추가</span>
          </button>
        </div>
      </div>
    </div>

    <!-- 퍼펫트한 관리 카드 -->
    <div class="management-card">
      <div class="management-card-header">
        <img src="../svg/ribbon.svg" alt="" class="management-card-ribbon" />
        <span class="sr-only">퍼펫트한 관리 카드</span>
      </div>

      <!-- 슬라이드 컨테이너 (일정 관리 섹션만 슬라이드) -->
      <div class="management-slider-container">
        <div class="management-slider-wrapper" id="managementSlider">
          <!-- 첫 번째 슬라이드: 일정 관리 -->
          <div class="management-slide active">
            <div class="calendar-section">
              <div class="calendar-header">
                <svg
                  class="calendar-arrow"
                  width="12"
                  height="12"
                  viewBox="0 0 12 12"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M7.5 3L4.5 6L7.5 9"
                    stroke="#000000"
                    stroke-width="1.5"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                </svg>
                <span class="calendar-month">12월</span>
                <svg
                  class="calendar-arrow"
                  width="12"
                  height="12"
                  viewBox="0 0 12 12"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M4.5 3L7.5 6L4.5 9"
                    stroke="#000000"
                    stroke-width="1.5"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  />
                </svg>
              </div>

              <div class="schedule-list">
                <div class="schedule-item">
                  <div class="schedule-icon">
                    <img
                      src="../svg/medicine.svg"
                      alt="약"
                      class="schedule-icon-img"
                    />
                  </div>
                  <div class="schedule-text">05일(금) 외부 기생충약 투약</div>
                </div>
                <!-- 예약 일정은 JavaScript로 동적 추가 -->
                <!-- 생일 일정은 JavaScript로 동적 추가 -->
              </div>
            </div>
          </div>

          <!-- 두 번째 슬라이드: 체중 히스토리 -->
          <div class="management-slide">
            <div class="weight-history-section">
              <div class="weight-history-title">체중 히스토리 / 비만도</div>
              <div class="weight-history-content">
                <div class="weight-graph-container">
                  <div class="weight-graph">
                    <svg
                      class="weight-graph-svg"
                      viewBox="0 0 149 60"
                      preserveAspectRatio="none"
                    >
                      <!-- 그리드 라인 -->
                      <line
                        x1="0"
                        y1="15"
                        x2="128"
                        y2="15"
                        stroke="#000000"
                        stroke-width="1"
                      />
                      <line
                        x1="0"
                        y1="30"
                        x2="128"
                        y2="30"
                        stroke="#000000"
                        stroke-width="1"
                      />
                      <line
                        x1="0"
                        y1="45"
                        x2="128"
                        y2="45"
                        stroke="#000000"
                        stroke-width="1"
                      />
                      <line
                        x1="0"
                        y1="60"
                        x2="128"
                        y2="60"
                        stroke="#000000"
                        stroke-width="1"
                      />
                      <!-- 데이터 포인트 -->
                      <circle
                        cx="2"
                        cy="15"
                        r="2"
                        fill="#2065c0"
                        stroke="#023e8c"
                        stroke-width="1"
                      />
                      <circle
                        cx="43"
                        cy="30"
                        r="2"
                        fill="#2065c0"
                        stroke="#023e8c"
                        stroke-width="1"
                      />
                      <circle
                        cx="83"
                        cy="20"
                        r="2"
                        fill="#2065c0"
                        stroke="#023e8c"
                        stroke-width="1"
                      />
                      <circle
                        cx="120"
                        cy="30"
                        r="2"
                        fill="#2065c0"
                        stroke="#023e8c"
                        stroke-width="1"
                      />
                      <!-- 라인 -->
                      <polyline
                        points="2,15 43,30 83,20 120,30"
                        fill="none"
                        stroke="#2065c0"
                        stroke-width="1.5"
                      />
                    </svg>
                    <div class="weight-graph-labels-x">
                      <span>09월</span>
                      <span>10월</span>
                      <span>11월</span>
                      <span>12월</span>
                    </div>
                    <div class="weight-graph-labels-y">
                      <span>7.2kg</span>
                      <span>7.0kg</span>
                      <span>6.8kg</span>
                    </div>
                  </div>
                  <div class="weight-status">
                    <div class="weight-status-bar"></div>
                    <div class="weight-status-text">적정<br />(4-5단계)</div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- 슬라이드 네비게이션 버튼 -->
        <button
          class="management-slider-btn management-slider-btn-prev"
          id="sliderPrevBtn"
        >
          <svg
            width="17"
            height="17"
            viewBox="0 0 17 17"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <circle cx="8.5" cy="8.5" r="8.5" fill="#d9d9d9" />
            <path
              d="M10 5L6 8.5L10 12"
              stroke="#000000"
              stroke-width="1.5"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
          </svg>
        </button>
        <button
          class="management-slider-btn management-slider-btn-next"
          id="sliderNextBtn"
        >
          <svg
            width="17"
            height="17"
            viewBox="0 0 17 17"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <circle cx="8.5" cy="8.5" r="8.5" fill="#d9d9d9" />
            <path
              d="M7 5L11 8.5L7 12"
              stroke="#000000"
              stroke-width="1.5"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
          </svg>
        </button>
      </div>

      <!-- 활동 버튼 (고정) -->
      <div class="activity-buttons">
        <div class="activity-button">
          <div class="activity-button-container">
            <div class="activity-icon-circle">
              <svg class="activity-progress" viewBox="0 0 48 48">
                <circle
                  class="progress-bg"
                  cx="24"
                  cy="24"
                  r="19"
                  fill="none"
                  stroke="#d9d9d9"
                  stroke-width="6"
                />
                <circle
                  class="progress-fill walk-progress"
                  cx="24"
                  cy="24"
                  r="19"
                  fill="none"
                  stroke="#76B2FF"
                  stroke-width="6"
                  stroke-dasharray="89.54 29.84"
                  stroke-dashoffset="0"
                  transform="rotate(-90 24 24)"
                />
              </svg>
              <img src="../svg/walk.svg" alt="산책" class="activity-icon" />
            </div>
            <span class="activity-label">산책</span>
          </div>
        </div>
        <div class="activity-button">
          <div class="activity-button-container">
            <div class="activity-icon-circle">
              <svg class="activity-progress" viewBox="0 0 48 48">
                <circle
                  class="progress-bg"
                  cx="24"
                  cy="24"
                  r="19"
                  fill="none"
                  stroke="#d9d9d9"
                  stroke-width="6"
                />
                <circle
                  class="progress-fill poo-progress"
                  cx="24"
                  cy="24"
                  r="19"
                  fill="none"
                  stroke="#76B2FF"
                  stroke-width="6"
                  stroke-dasharray="119.38 0"
                  stroke-dashoffset="0"
                  transform="rotate(-90 24 24)"
                />
              </svg>
              <img src="../svg/poo.svg" alt="배변" class="activity-icon" />
            </div>
            <span class="activity-label">배변</span>
          </div>
        </div>
        <div class="activity-button">
          <div class="activity-button-container">
            <div class="activity-icon-circle">
              <svg class="activity-progress" viewBox="0 0 48 48">
                <circle
                  class="progress-bg"
                  cx="24"
                  cy="24"
                  r="19"
                  fill="none"
                  stroke="#d9d9d9"
                  stroke-width="6"
                />
                <circle
                  class="progress-fill ear-progress"
                  cx="24"
                  cy="24"
                  r="19"
                  fill="none"
                  stroke="#76B2FF"
                  stroke-width="6"
                  stroke-dasharray="59.69 59.69"
                  stroke-dashoffset="0"
                  transform="rotate(-90 24 24)"
                />
              </svg>
              <img
                src="../svg/ear_clean.svg"
                alt="귀청소"
                class="activity-icon"
              />
            </div>
            <span class="activity-label">귀청소</span>
          </div>
        </div>
      </div>
    </div>

    <!-- 이벤트 배너 -->
    <div class="event-banner">
      <div class="event-content">
        <div class="event-tag">EVENT</div>
        <div class="event-text">
          <div class="event-title">
            자연식이 전하는 맛있는 치유 하이독 UP TO 25%
          </div>
          <div class="event-subtitle">
            원재료를 그대로 담은 처방화식 케어브이 라얀
          </div>
        </div>
        <div class="event-images">
          <div class="event-image"></div>
          <div class="event-image"></div>
        </div>
      </div>
    </div>

    <!-- 맞춤 추천 섹션 -->
    <div class="recommendation-card">
      <div class="recommendation-header">
        <h3 class="recommendation-title">퍼펫트한 맞춤추천</h3>
        <div class="recommendation-tabs">
          <button class="tab-btn">병원</button>
          <button class="tab-btn active">사료</button>
          <button class="tab-btn">영양제</button>
          <button class="tab-btn">간식</button>
        </div>
      </div>

      <p class="recommendation-subtitle">
        뼈/칼슘 튼튼 쿵이를 위한 최저가 사료 추천
      </p>

      <div class="product-list">
        <div class="product-card">
          <div class="product-image"></div>
          <div class="product-brand">룰루키친</div>
          <p class="product-name">룰루키친 램(양)</p>
          <div class="product-price">
            <span class="discount">15%</span>
            <span class="price">13,000원</span>
          </div>
          <div class="product-rating">
            <span class="rating-stars">★</span>
            <span class="rating-number">5</span>
            <span class="rating-reviews">리뷰 3</span>
          </div>
        </div>

        <div class="product-card">
          <div class="product-image"></div>
          <div class="product-brand">룰루키친</div>
          <p class="product-name">룰루키친 치킨(닭)</p>
          <div class="product-price">
            <span class="discount">15%</span>
            <span class="price">10,500원</span>
          </div>
          <div class="product-rating">
            <span class="rating-stars">5</span>
            <span class="rating-reviews">리뷰 1</span>
          </div>
        </div>

        <div class="product-card">
          <div class="product-image"></div>
          <div class="product-brand">룰루키친</div>
          <p class="product-name">룰루키친 비프(소)</p>
          <div class="product-price">
            <span class="discount">15%</span>
            <span class="price">12,500원</span>
          </div>
          <div class="product-rating">
            <span class="rating-stars">★</span>
            <span class="rating-number">5</span>
            <span class="rating-reviews">리뷰 3</span>
          </div>
        </div>
      </div>
    </div>

    <!-- AI 채팅 플로팅 버튼 -->
    <button class="ai-chat-fab" id="aiChatButton">
      <img src="../svg/bot.svg" alt="AI 채팅" class="bot-icon" />
    </button>

    <!-- 배너 광고 모달 -->
    <div class="banner-modal" id="bannerModal">
      <div class="banner-modal-overlay"></div>
      <div class="banner-modal-content">
        <img
          src="/banner1.png"
          alt="배너 광고"
          class="banner-image"
          id="bannerImage"
        />
        <button class="banner-close-btn" id="bannerCloseBtn" aria-label="닫기">
          ×
        </button>
      </div>
    </div>

    <!-- TabBar -->
    <div class="tabbar">
      <div class="tabbar-tabs">
        <div class="tab-item">
          <img src="../svg/shop.svg" alt="자사몰" class="tab-icon" />
          <span class="tab-label">자사몰</span>
        </div>
        <div class="tab-item">
          <img src="../svg/hospital.svg" alt="병원" class="tab-icon" />
          <span class="tab-label">병원</span>
        </div>
        <div class="tab-item active">
          <img src="../svg/home.svg" alt="홈" class="tab-icon" />
          <span class="tab-label">홈</span>
        </div>
        <div class="tab-item">
          <img src="../svg/vet.svg" alt="수의사" class="tab-icon" />
          <span class="tab-label">수의사</span>
        </div>
        <div class="tab-item">
          <img
            src="../svg/icon_community.svg"
            alt="커뮤니티"
            class="tab-icon"
          />
          <span class="tab-label">커뮤니티</span>
        </div>
      </div>
    </div>

    <script src="../common/auth-check.js"></script>
    <script src="../common/supabase-config.js"></script>
    <script src="script.js"></script>
    <script src="../common/tabbar.js"></script>
    <script>
      // 인증 체크
      document.addEventListener("DOMContentLoaded", function () {
        checkAuth();
      });
    </script>
    <script>
      // AI 채팅 버튼 클릭 이벤트
      document.addEventListener("DOMContentLoaded", function () {
        const aiChatButton = document.getElementById("aiChatButton");
        if (aiChatButton) {
          aiChatButton.addEventListener("click", function () {
            window.location.href = "../chatbot/chat.html";
          });
        }
      });
    </script>
  </body>
</html>
